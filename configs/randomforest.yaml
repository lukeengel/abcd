use_pca: false
tuning:
  enabled: true
  cv_folds: 3  # Fewer folds = more samples per validation fold (better for small minority class)
  scoring: roc_auc  # PR-AUC - better for imbalanced data average_precision, roc_auc, balanced_accuracy
  fbeta_beta: 0.65  # For threshold optimization: beta=1 is F1 (equal precision/recall balance) was 0.7
  n_jobs: -1
  param_grid:
    n_estimators:
    - 400
    max_depth:
    - 10
    min_samples_leaf:
    - 30
    min_samples_split:
    - 10
    max_features:
    - sqrt
    class_weight:
    #- balanced  # Auto-calculates optimal weight
    - 0: 1.0
      1: 4.0
    - 0: 1.0
      1: 1.0

cv:
  n_outer_splits: 5
  inner_val_ratio: 0.25
  shuffle: true
baseline:
  class_weight: null  # Don't use class_weight - LR already handles imbalance well
  max_iter: 2000
  solver: lbfgs
  penalty: l2
  C: 0.1  # Stronger regularization for imbalanced data
model:
  n_estimators: 500
  max_depth: 20  # Increased from 8 - allow more complex patterns
  min_samples_split: 20  # Reduced from 40 - less restrictive
  min_samples_leaf: 10  # Reduced from 40 - allow finer splits
  max_features: sqrt
  class_weight: balanced
  bootstrap: true
  oob_score: true
  n_jobs: -1
  random_state: null
  max_samples: 0.8  # Increased from 0.7 - use more data per tree
tasks:
- name: any_vs_control
  positive_classes:
  - Clinical
  - Subclinical
  negative_class: Control
- name: clinical_vs_control
  positive_class: Clinical
  negative_class: Control
- name: subclinical_vs_control
  positive_class: Subclinical
  negative_class: Control
- name: clinical_vs_subclinical
  positive_class: Clinical
  negative_class: Subclinical
evaluation:
  bootstrap:
    enabled: true
    iterations: 1000
  decision_threshold: 0.05  # Set to best F2 threshold from analysis
  threshold_metric: fbeta  # F-beta with beta=1.0 balances precision and recall
  threshold_search:
    enabled: true
    thresholds:
    - 0.02
    - 0.03
    - 0.04
    - 0.05
    - 0.06
    - 0.08
    - 0.10
    - 0.12
    - 0.15
    - 0.20
    - 0.25
    - 0.30
    - 0.40
    - 0.50
interpretation:
  top_n_features: 20
  permutation_importance: false
imaging_prefixes:
- dmri
- smri_area_cdk
- smri_thick_cdk
- smri_sulc_cdk
- smri_vol_cdk
- smri_vol_scs
- mrisdp
